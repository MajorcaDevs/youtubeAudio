{"version":3,"sources":["PlayQueue.js","PlayQueueList.js","keys.js","api.js","SearchPanel.js","LastFM.js","App.js","registerServiceWorker.js","index.js","github.svg"],"names":["PlayQueue","initialValue","arguments","length","undefined","Object","classCallCheck","this","_array","_store","playQueueJSONString","_obtain","filter","entry","title","_len","elements","Array","_key","toConsumableArray","values","concat","element","slice","index","findIndex","searchElement","id","startIndex","endIndex","result","from","_result$splice","splice","removed","slicedToArray","window","sessionStorage","setItem","JSON","stringify","e","value","getItem","parse","PlayQueueItem","_ref","song","onRemove","react_default","a","createElement","react_beautiful_dnd_esm","key","draggableId","provided","snapshot","assign","ref","innerRef","draggableProps","dragHandleProps","className","style","objectSpread","color","isDragging","onClick","PlayQueueList","props","_this","possibleConstructorReturn","getPrototypeOf","call","state","edit","changeEditMode","bind","assertThisInitialized","reordered","_this2","_this$props","showing","playQueue","push","styles","overflowY","onDragEnd","droppableId","map","songInQueue","i","PlayQueueList_PlayQueueItem","onPlaylistItemRemove","web","keys","right","_right","enter","leave","preventDefault","setState","destination","onPlaylistItemReorder","source","windowWidth","document","body","clientWidth","Component","GOOGLE_API_KEY","process","BASE_API_URL","compatibility","opus","canPlayType","vorbis","m4a","ApiException","b","message","descriptiveMessage","selectBestOption","youtubeVideoID","Promise","resolve","reject","$","ajax","async","type","url","success","response","prop","desc","container","extra","startsWith","forEach","bits","split","codec","bitrate","parseInt","sort","error","loadAudioURL","formatID","addYoutubePlaylist","youtubePlaylistID","nextId","items","item","snippet","resourceId","videoId","nextPageToken","then","moreItems","catch","searchVideos","query","maxResults","YoutubeVideoSearch","encodeURIComponent","Math","min","totalListed","total","NaN","createClass","hasEnded","Error","pageInfo","totalResults","get","ceil","Pagination","page","totalPages","prevPage","nextPage","role","aria-label","disabled","SearchPanel","text","loading","results","searchFieldDoSearch","searchFieldChanged","onPlayClicked","onEnqueueClicked","_this$state","htmlFor","placeholder","onKeyUp","onChange","SearchPanel_Pagination","_search","thumbnails","src","medium","default","alt","width","href","event","target","keyCode","getNextPage","max","loadedPages","Map","prototype","func","mapped","entries","parseTitle","replace","trim","isChunguillo","exec","parts","artist","Lastfm","_userToken","_userName","_disableScrobblings","location","search","substr","reduce","x","localStorage","_JSON$parse","userToken","userName","disableScrobblings","token","_makeRequest","method","json","session","name","currentUrl","toString","removeItem","reload","metadata","track","duration","trunc","timestamp","params","mParams","set","_signature","join","toLowerCase","fetch","baseUrl","headers","Headers","append","sig","localeCompare","prev","md5","App","_testYoutubeVideoURL","youtubeVideoURL","qualityFromAudio","invalidURL","youtubeAudioURL","youtubeVideoTitle","nightMode","currentFormat","showingQueue","showingSearch","isPlaying","scrobblingState","audioRef","React","createRef","lastfm","xD","v","listenerTestButton","nightModeListener","enqueueFromSeach","onWindowKeyUp","titleProgress","playFromSeach","listenerForm","onSongError","addToQueue","formatTime","showQueue","showSearch","onSongEnd","playSong","nextSong","onPause","onPlay","clear","emptyQueue","add","loadSong","loadingToast","dismiss","_context","t0","loadPlaylist","addFirst","_this3","kind","playlistId","_this4","autoplay","bps","_this5","current","oncanplay","asyncToGenerator","regenerator_default","mark","_callee2","wrap","_context2","next","play","toast","update","_toast","TYPE","INFO","render","App_NotifContent","light","closeButton","closeOnClick","stop","_context3","startPlaying","newState","_this$state$playQueue","apply","_context4","getYoutubeVideoID","getPlaylistID","parseQuery","list","currentTime","seconds","round","minutes","floor","hours","_this6","time","bowser","safari","hasLoggedIn","parsed","updateNowPlaying","Date","scrobble","pause","_this7","deleteFirst","code","MEDIA_ERR_NETWORK","autoClose","MEDIA_ERR_SRC_NOT_SUPPORTED","reorder","delete","getAttribute","stopPropagation","paused","_this8","addEventListener","forceUpdate","hostname","info","onClose","prevProps","prevState","LoadingToastController","addClass","removeClass","_this$state2","App_Header","lib","pauseOnHover","App_Button","NowPlayingText","controls","onError","onTimeUpdate","onEnded","src_PlayQueueList_PlayQueueList","src_SearchPanel_SearchPanel","App_PlayQueueListButton","left","App_SearchButton","App_Footer","str","obj","last","defineProperty","Button","lprops","LoadingSpinner","_ref5","Header","_ref6","deauthenticate","startAuthentication","username","position","top","fontSize","marginLeft","Footer","rel","github","NotifContent","_ref7","PlayQueueListButton","_ref8","to","SearchButton","_ref9","App_LoadingSpinner","content","DEFAULT","ERROR","isLocalhost","Boolean","match","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","ReactDOM","src_App","getElementById","URL","origin","status","indexOf","ready","unregister","checkValidServiceWorker","registerServiceWorker","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/main.5e26b7cf.chunk.js","sourcesContent":["/**\n * An inmutable Play Queue\n */\nexport default class PlayQueue {\n    /**\n     * Creates a new PlayQueue. If `initialValue` is null or undefined will load the contents\n     * from the session storage (you should use this behaviour). If it's defined, then the\n     * contents are defined from this value and stored into the session storage (used by the\n     * class to implement immutability).\n     *\n     * The class **is immutable**, meaning that everything you do doesn't modify the object\n     * itself. Instead, returns a copy of the queue with the modification applied.\n     * @param {Array} initialValue initial content for the queue (used in general by internal API)\n     */\n    constructor(initialValue = undefined) {\n        if(initialValue) {\n            this._array = initialValue;\n            this._store();\n        } else {\n            let playQueueJSONString = this._obtain();\n            if (playQueueJSONString !== null){\n                this._array = playQueueJSONString.filter(entry => entry.title !== null);\n                this._store();\n            } else {\n                this._array = [];\n                this._store();\n            }\n        }\n    }\n\n    get values() { return this._array; }\n\n    /**\n     * Adds elements to the end of the queue and returns the queue with the changes applied\n     * @param {{id: string, title: string | null}} elements The elements to add to the queue\n     * @returns PlayQueue with the new elements added\n     */\n    add(...elements) {\n        return new PlayQueue([...this.values, ...elements ]);\n    }\n\n    /**\n     * Adds a new element to the beginning of the queue and returns a new queue with the changes\n     * @param {{id: string, title: string | null}} element The element to add\n     * @returns PlayQueue with the new element added\n     */\n    addFirst(element) {\n        return new PlayQueue([ element, ...this.values ]);\n    }\n\n    /**\n     * Empties the queue\n     * @returns PlayQueue A PlayQueue empty\n     */\n    emptyQueue(){\n        return new PlayQueue([]);\n    }\n\n    /**\n     * Deletes the first element of the queue, if there is at least one item\n     * @returns A PlayQueue with the first element removed\n     */\n    deleteFirst(){\n        return this.values.length > 0 ? new PlayQueue(this.values.slice(1)) : this;\n    }\n\n    /**\n     * Searches the element by its id and removes it from the Queue\n     * @param {{id: string}} element Element to remove\n     * @returns PlayQueue A PlayQueue with that element removed\n     */\n    delete(element){\n        let index = this.values.findIndex(searchElement => element.id === searchElement.id);\n        if (index !== -1) {\n            return new PlayQueue(this.values.slice(0, index).concat(this.values.slice(index + 1)));\n        } else {\n            return this;\n        }\n    }\n\n    /**\n     * Reorders the element from the start index to the final index. It supposes the indices are ok. 0 is for the first\n     * element in the queue, that is 1 on the array.\n     * @param startIndex Index of the element that will be moved\n     * @param endIndex Index of where the item will be placed\n     * @returns {PlayQueue} A copy of this, with the element reordered\n     */\n    reorder(startIndex, endIndex) {\n        const result = Array.from(this._array);\n        const [removed] = result.splice(startIndex + 1, 1);\n        result.splice(endIndex + 1, 0, removed);\n        return new PlayQueue(result);\n    }\n\n    /**\n     * Stores the current queue in the session storage\n     */\n    _store() {\n        try {\n            window.sessionStorage.setItem('playQueue', JSON.stringify(this._array));\n        } catch(e) {}\n    }\n\n    /**\n     * Parses the stored queue from the session storage\n     */\n    _obtain() {\n        let value = window.sessionStorage.getItem('playQueue');\n        return value ? JSON.parse(value) : value;\n    }\n\n}","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Transition } from 'react-spring';\nimport { Draggable, Droppable, DragDropContext } from 'react-beautiful-dnd';\nimport './styles/PlayQueueList/PlayQueueList.css';\n\n\nconst PlayQueueItem = ({ song, index, onRemove }) => (\n    <Draggable key={ `${index}-${song.id}` } draggableId={ `${index}-${song.id}` } index={ index }>\n        {(provided, snapshot) => (\n            <div ref={ provided.innerRef }\n                 { ...provided.draggableProps }\n                 { ...provided.dragHandleProps }\n                className=\"row\"\n                style={{ ...provided.draggableProps.style, color: snapshot.isDragging ? '#AAA' : null }}>\n                <div className=\"col-auto reorder-icon\">\n                    <i className=\"material-icons\">reorder</i>\n                </div>\n                <div className=\"col\">{ song.title }</div>\n                <div className=\"col-auto delete-icon\">\n                    <button className=\"btn btn-sm\" onClick={ () => onRemove(song, index) }>\n                        <i className=\"material-icons\">delete</i>\n                    </button>\n                </div>\n            </div>\n        )}\n    </Draggable>\n);\n\nexport default class PlayQueueList extends Component{\n\n    static propTypes = {\n        showing: PropTypes.bool.isRequired,\n        playQueue: PropTypes.object.isRequired,\n        onPlaylistItemReorder: PropTypes.func.isRequired,\n        onPlaylistItemRemove: PropTypes.func.isRequired,\n    };\n\n    constructor(props){\n        super(props);\n        this.state = {\n            edit: false\n        };\n        this.changeEditMode = this.changeEditMode.bind(this);\n        this.reordered = this.reordered.bind(this);\n    }\n\n    render () {\n        const { showing, playQueue } = this.props;\n        const { edit } = this.state;\n        let element = [];\n        if (showing) {\n            if (playQueue.values.length <= 1) {\n                element.push(styles => <div id=\"playQueueList\" style={styles}> Play Queue is Empty </div>);\n            } else {\n                element.push(styles => (\n                    <div id=\"playQueueList\" style={{overflowY: 'scroll', ...styles}}>\n                        <div>\n                            <h2>Play Queue</h2>\n                            <div className=\"col-auto edit-icon\">\n                                <button className={`btn btn-sm edit-button ${edit ? 'active' : ''}`} onClick={ this.changeEditMode }>\n                                    <i className=\"material-icons\">edit</i>\n                                </button>\n                            </div>\n                        </div>\n                        {edit ?\n                            <DragDropContext onDragEnd={this.reordered}>\n                                <Droppable droppableId=\"play-queue-list\">\n                                    {(provided) => (\n                                        <div className=\"list-container\" ref={provided.innerRef}>\n                                            {[...this.props.playQueue.values].splice(1).map((songInQueue, i) => (\n                                                <PlayQueueItem key={i} song={songInQueue} index={i}\n                                                               onRemove={this.props.onPlaylistItemRemove}/>\n                                            ))\n                                            }\n                                            <hr/>\n                                        </div>\n                                    )}\n                                </Droppable>\n                            </DragDropContext>\n                            :\n                            <div className=\"list-container\">\n                                {[...this.props.playQueue.values].splice(1).map((songInQueue, i) => (\n                                    <div className=\"row\" key={ i }>\n                                        <div className=\"col\">\n                                            { songInQueue.title }\n                                        </div>\n                                    </div>\n                                ))}\n                                <hr/>\n                            </div>\n                        }\n                    </div>\n                ));\n            }\n        }\n\n        return (\n            <Transition\n                keys={element.map(() => 'queue')}\n                from={{ right: PlayQueueList._right }}\n                enter={{ right: 0 }}\n                leave={{ right: PlayQueueList._right }}>\n                    { element }\n            </Transition>\n        );\n    }\n\n    changeEditMode(e) {\n        e.preventDefault();\n        this.setState({\n            edit: !this.state.edit\n        });\n    }\n\n    reordered(result) {\n        if(!result.destination) {\n            return;\n        }\n\n        this.props.onPlaylistItemReorder(result.source.index, result.destination.index);\n    }\n\n    static get _right() {\n        const windowWidth = window.document.body.clientWidth;\n        if(windowWidth < 576) {\n            return -windowWidth * 0.90;\n        } else if(windowWidth < 768) {\n            return -288;\n        } else if(windowWidth < 1200) {\n            return -384;\n        } else {\n            return -400;\n        }\n    }\n}\n","export const GOOGLE_API_KEY = process.env.REACT_APP_GOOGLE_API_KEY;\nexport const LASTFM_API_KEY = process.env.REACT_APP_LASTFM_API_KEY;\nexport const LASTFM_SECRET = process.env.REACT_APP_LASTFM_SECRET;","import $ from 'jquery';\nimport { GOOGLE_API_KEY } from './keys';\nconst BASE_API_URL = \"https://ytdl-audio-api.majorcadevs.com/api\";\n\nconst compatibility = (function() {\n    let a = document.createElement(\"audio\");\n    return {\n        opus: ((a.canPlayType(\"audio/webm; codecs=opus\")) !== \"\"),\n        vorbis: ((a.canPlayType(\"audio/webm; codecs=vorbis\")) !== \"\"),\n        m4a: ((a.canPlayType(\"audio/x-m4a; codecs=mp4a.40.2\")) !== \"\")\n    };\n})();\n\nconst predicateBy = (prop, desc) => {\n    return (a,b) => {\n        if (a[prop] > b[prop])\n            return desc ? -1 : 1;\n        else if(a[prop] < b[prop])\n            return desc ? 1 : -1;\n        else\n             return 0;\n    }\n}\n\nclass ApiException {\n    constructor(a, b) {\n        this.message = a;\n        this.descriptiveMessage = b;\n    }\n}\n\n/**\n * Selects the best available and compatible quality for the video + browser and returns the result. async/await\n * compatible.\n * @param {string} youtubeVideoID Youtube video ID (that part at the end of an URL that follows after the ?v=)\n * @returns a Promise\n */\nexport const selectBestOption = (youtubeVideoID) => new Promise((resolve, reject) => {\n    $.ajax({\n        async: true,\n        type: \"GET\",\n        url: `${BASE_API_URL}/${youtubeVideoID}/formats`,\n        success: (response) => {\n            response = response\n                .filter(e => compatibility.m4a && e.container === 'm4a')\n                .concat(response.filter(e => compatibility.vorbis && e.extra.startsWith('vorbis')))\n                .concat(response.filter(e => compatibility.opus && e.extra.startsWith('opus')));\n            if(response.length === 0) {\n                reject(new ApiException('No compatible sources for your browser',\n                       'We could not find any compatible sources for your browser. It seems ' +\n                       'that your browser doesn\\'t support neither Opus, Vorbis nor AAC.'));\n                return;\n            }\n            response.forEach(e => {\n                let bits = e.extra.split(/[\\s@k]+/g);\n                e.codec = bits[0]; e.bitrate = parseInt(bits[1], 10);\n                if (e.codec !== \"vorbis\" && e.codec !== \"opus\")\n                    e.codec = \"m4a\";\n            });\n            response.sort(predicateBy(\"bps\", true));\n            resolve(response[0]);\n        },\n        error: () => reject(new ApiException('Video not found', 'Check that the video URL exists or is complete.'))\n    });\n});\n\n/**\n * Loads the audio URL (and title) of the video with the selected quality. If quality is `null` then will\n * use the best available quality for the audio. async/await compatible.\n * @param {string} youtubeVideoID Youtube video ID (that part of an yt url that follows after the ?v=)\n * @param {number | null} formatID A format ID returned from selectBestOption or nothing\n * @returns A Promise\n */\nexport const loadAudioURL = (youtubeVideoID, formatID = null) => new Promise((resolve, reject) => {\n    $.ajax({\n        async: true,\n        type: \"GET\",\n        url: formatID ? `${BASE_API_URL}/${youtubeVideoID}/${formatID}` : `${BASE_API_URL}/${youtubeVideoID}`,\n        success: (response) => {\n            resolve(response);\n        },\n        error: () => reject(new ApiException('Video not found', 'Check that the video URL exists or is complete.'))\n    });\n});\n\n/**\n * Loads a full playlist into a list of `{ id: ..., title: ... }` objects. async/await compatible.\n * @param {string} youtubePlaylistID The youtube playlist ID (that part that follows next ?list=)\n * @param {string | null} nextId Used internally, don't set any value\n * @returns A Promise\n */\nexport const addYoutubePlaylist = (youtubePlaylistID, nextId = null) => new Promise((resolve, reject) => {\n    let url = `https://www.googleapis.com/youtube/v3/playlistItems?part=id,snippet&maxResults=50&playlistId=${youtubePlaylistID}&key=${GOOGLE_API_KEY}`;\n    if(nextId) url += `&pageToken=${nextId}`;\n    $.ajax({\n        url,\n        async: true,\n        type: 'GET',\n        success: response => {\n            const items = response.items.map(item => ({ id: item.snippet.resourceId.videoId, title: item.snippet.title }));\n            if(response.nextPageToken) {\n                addYoutubePlaylist(youtubePlaylistID, response.nextPageToken)\n                    .then(moreItems => resolve([ ...items, ...moreItems ]))\n                    .catch(reject);\n            } else {\n                resolve(items);\n            }\n        },\n        error: () => reject(new ApiException('Cannot load videos from playlist',\n                                             'Something bad has happened while we were asking to YouTube for the videos in that playlist :('))\n    });\n});\n\n/**\n * Prepares a Youtube Video Search with the query and returns a class with getNextPage() and hasEnded.\n * getNextPage() returns a promise with more results, and hasEnded returns true if there's no more\n * results to retreive.\n * @param {string} query Query of the search\n * @param {number} maxResults Number of results per page (10 by default)\n */\nexport const searchVideos = (query, maxResults = 10) => {\n    class YoutubeVideoSearch {\n        constructor() {\n            this.url = `https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(query)}&key=${GOOGLE_API_KEY}&maxResults=${Math.min(maxResults, 50)}&type=video,playlist`;\n            this.nextPageToken = null;\n            this.totalListed = 0;\n            this.total = NaN;\n        }\n\n        getNextPage() {\n            if(this.hasEnded) {\n                return Promise.reject(new Error(\"End of the list\"));\n            }\n\n            return new Promise((resolve, reject) => {\n                let url = this.url;\n                if(this.nextPageToken) {\n                    url += `&pageToken=${this.nextPageToken}`;\n                }\n\n                $.ajax({\n                    url,\n                    async: true,\n                    type: 'GET',\n                    success: response => {\n                        if(response.nextPageToken) {\n                            this.nextPageToken = response.nextPageToken;\n                        }\n                        this.totalListed += response.items.length;\n                        this.total = response.pageInfo.totalResults;\n                        resolve(response.items);\n                    },\n                    error: () => reject(new ApiException('Cannot search for videos',\n                                                         'Something bad has happened while we were asking to YouTube for videos :('))\n                })\n            });\n        }\n\n        get hasEnded() {\n            return this.totalListed === this.total;\n        }\n\n        get loadedPages() {\n            return Math.ceil(this.totalListed / maxResults);\n        }\n\n        get totalPages() {\n            return Math.ceil(this.total / maxResults);\n        }\n    }\n\n    return new YoutubeVideoSearch();\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Transition } from 'react-spring';\nimport { searchVideos } from './api.js';\nimport './styles/SearchPanel/SearchPanel.css';\n\n\nconst Pagination = ({ page, totalPages, prevPage, nextPage }) => (\n    <div className=\"btn-group search-panel-pagination\" role=\"group\" aria-label=\"Pagination\">\n        <button type=\"button\" className=\"btn btn-secondary btn-sm\" disabled={ page === 0 } onClick={ prevPage }>\n            <i className=\"material-icons\">chevron_left</i>\n        </button>\n        <button type=\"button\" className=\"btn btn-secondary btn-sm\" disabled={ true }>\n            { page + 1 }\n        </button>\n        <button type=\"button\" className=\"btn btn-secondary btn-sm\" disabled={ page === totalPages - 1 } onClick={ nextPage }>\n            <i className=\"material-icons\">chevron_right</i>\n        </button>\n    </div>\n);\n\n\nexport default class SearchPanel extends Component {\n\n    static propTypes = {\n        showing: PropTypes.bool.isRequired,\n        onPlayClicked: PropTypes.func.isRequired,\n        onEnqueueClicked: PropTypes.func.isRequired,\n    };\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            text: \"\",\n            loading: false,\n            results: [],\n            page: 0,\n        };\n\n        this.searchFieldDoSearch = this.searchFieldDoSearch.bind(this);\n        this.searchFieldChanged = this.searchFieldChanged.bind(this);\n        this.prevPage = this.prevPage.bind(this);\n        this.nextPage = this.nextPage.bind(this);\n    }\n\n    render() {\n        const { showing, onPlayClicked, onEnqueueClicked } = this.props;\n        const { text, loading, results, page } = this.state;\n        let element = [];\n        if (showing) {\n            element.push(styles => <div id=\"searchPanel\" style={styles}>\n                <div className=\"mt-4 ml-4 mr-4\">\n                    <div className=\"form-group\">\n                        <label htmlFor=\"search-input\">Search for videos</label>\n                        <input id=\"search-input\" className=\"form-control\" placeholder=\"Search\"\n                            disabled={ loading }\n                            value={ text }\n                            onKeyUp={ this.searchFieldDoSearch }\n                            onChange={ this.searchFieldChanged } />\n                    </div>\n                    <div className=\"container\">\n                        { results.length > 0 ? (\n                            <Pagination page={ page } nextPage={ this.nextPage } prevPage={ this.prevPage } totalPages={ this._search.totalPages - 1 } />\n                        ) : null }\n                        { results.length > 0 ? results[page].map((item, i) => (\n                            <div key={i} className=\"row mb-1 result\">\n                                <div className=\"col-auto\">\n                                    { item.snippet.thumbnails &&\n                                        <img src={(item.snippet.thumbnails.medium || item.snippet.thumbnails.default).url} alt=\"Video thumbnail\" width={ 128 } onClick={ () => onPlayClicked(item) } />\n                                    }\n                                </div>\n                                <div className=\"col row\">\n                                    <div className=\"col-12 align-self-start\">\n                                        <small>{ item.snippet.title }</small>\n                                    </div>\n                                    <div className=\"col-12 align-self-end\">\n                                        <a href=\"#\" onClick={ e => { e.preventDefault(); onPlayClicked(item) } }>\n                                            <i className=\"material-icons\">play_circle_outline</i>\n                                        </a>\n                                        <a href=\"#\" onClick={ e => { e.preventDefault(); onEnqueueClicked(item) } }>\n                                            <i className=\"material-icons\">playlist_add</i>\n                                        </a>\n                                    </div>\n                                </div>\n                            </div>\n                        )) : null }\n                        { results.length > 0 ? (\n                            <Pagination page={ page } nextPage={ this.nextPage } prevPage={ this.prevPage } totalPages={ this._search.totalPages - 1 } />\n                        ) : null }\n                    </div>\n                </div>\n            </div>);\n        }\n\n        return (\n            <Transition\n                keys={element.map(() => 'queue')}\n                from={{ right: SearchPanel._right }}\n                enter={{ right: 0 }}\n                leave={{ right: SearchPanel._right }}>\n                    { element }\n            </Transition>\n        );\n    }\n\n    searchFieldChanged(event) {\n        event.preventDefault();\n        this.setState({ text: event.target.value });\n    }\n\n    async searchFieldDoSearch(event) {\n        if(event.keyCode === 13) {\n            event.preventDefault();\n            this.setState({ loading: true, page: 0, results: [] });\n            this._search = searchVideos(this.state.text);\n            this.setState({ loading: false, results: [ await this._search.getNextPage() ] });\n        }\n    }\n\n    prevPage(event) {\n        event.preventDefault();\n        this.setState({ page: Math.max(this.state.page - 1, 0) });\n    }\n\n    async nextPage(event) {\n        event.preventDefault();\n        if(this.state.page + 1 === this._search.loadedPages) {\n            this.setState({ loading: true });\n            this.setState({ loading: false, results: [ ...this.state.results, await this._search.getNextPage() ], page: this.state.page + 1 });\n        } else {\n            this.setState({ page: Math.min(this.state.page + 1, this._search.totalPages - 1) });\n        }\n    }\n\n    static get _right() {\n        const windowWidth = window.document.body.clientWidth;\n        if(windowWidth < 576) {\n            return -windowWidth * 0.90;\n        } else if(windowWidth < 768) {\n            return -288;\n        } else if(windowWidth < 1200) {\n            return -384;\n        } else {\n            return -400;\n        }\n    }\n}\n","import md5 from 'blueimp-md5';\nimport { LASTFM_API_KEY, LASTFM_SECRET } from './keys';\n\nimport { doTest } from './lastfm.parseTitle.test';\n\nMap.prototype.map = function map(func) {\n    let mapped = [];\n    this.forEach((value, key) => mapped.push(func(value, key)));\n    return mapped;\n}\n\nMap.prototype.sort = function sort(func) {\n    return new Map([...this.entries()].sort((a, b) => func({ key: a[0], value: a[1] }, { key: b[0], value: b[1] })));\n}\n\nexport const parseTitle = (text) => {\n    text = text.replace(/(?:official )?(?:lyric )?(?:video|audio)/gi, '')\n               .replace(/[ ([]?hq[)\\] ]?/gi, '[-]')\n               .replace(/[ ([]?hd[)\\] ]?/gi, '[-]')\n               .replace(/[AB] ?\\d/, '')\n               .replace(/\\( *\\)/g, '')\n               .replace(/\\[ *\\]/g, '')\n               .trim();\n    const isChunguillo = /.+ - .+ - .+/.exec(text) !== null;\n    const parts = /([a-záéíóúàèìòùäëïöüâêîôûç_0-9&./',\\- ]+) - ([a-záéíóúàèìòùäëïöüâêîôûç_0-9&./',\\- ()]+)/i.exec(text);\n    if(parts !== null && !isChunguillo) {\n        return {\n            title: parts[2].trim(),\n            artist: parts[1].trim()\n        };\n    } else {\n        const parts = /([a-záéíóúàèìòùäëïöüâêîôûç_0-9&./',\\- ]+) (?:'|‘)([a-záéíóúàèìòùäëïöüâêîôûç_0-9&./',\\- ()]+)(?:'|’)/i.exec(text);\n        if(parts !== null) {\n            return {\n                title: parts[2].trim(),\n                artist: parts[1].trim()\n            };\n        }\n        return null;\n    }\n};\n\nif(process.env.NODE_ENV !== 'production') {\n    doTest();\n}\n\nexport class Lastfm {\n    static baseUrl = 'https://ws.audioscrobbler.com/2.0/';\n    _userToken = null;\n    _userName = null;\n    _disableScrobblings = false;\n\n    constructor() {\n        let query = window.location.search.substr(1).split(\"&\").map(e => e.split(\"=\")).reduce((x, e) => {\n            x[e[0]] = e[1];\n            return x;\n        }, {});\n        if(window.localStorage.getItem('lastfm')) {\n            const { userToken, userName, disableScrobblings } = JSON.parse(window.localStorage.getItem('lastfm'));\n            this._userToken = userToken;\n            this._userName = userName;\n            this._disableScrobblings = disableScrobblings;\n        } else if(query.token) {\n            this._makeRequest('get', { method: 'auth.getSession', 'token': query.token })\n                .then(json => {\n                    this._userToken = json.session.key;\n                    this._userName = json.session.name;\n                    window.localStorage.setItem('lastfm', JSON.stringify({\n                        userToken: this._userToken,\n                        userName: this._userName,\n                        disableScrobblings: this._disableScrobblings,\n                    }));\n                });\n        }\n    }\n\n    get hasLoggedIn() {\n        return this._userToken;\n    }\n\n    get username() {\n        return this._userName;\n    }\n\n    get disableScrobblings() {\n        return this._disableScrobblings;\n    }\n\n    set disableScrobblings(value) {\n        this._disableScrobblings = value;\n        window.localStorage.setItem('lastfm', JSON.stringify({\n            ...JSON.parse(window.localStorage.getItem('lastfm')),\n            disableScrobblings: this._disableScrobblings,\n        }));\n    }\n\n    startAuthentication() {\n        const currentUrl = window.location.toString();\n        window.location.assign(`http://www.last.fm/api/auth/?api_key=${LASTFM_API_KEY}&cb=${encodeURIComponent(currentUrl)}`);\n    }\n\n    deauthenticate() {\n        window.localStorage.removeItem('lastfm');\n        window.location.reload();\n    }\n\n    updateNowPlaying(metadata) {\n        if(metadata.title && metadata.artist && !this._disableScrobblings) {\n            return this._makeRequest('post', {\n                track: metadata.title,\n                artist: metadata.artist,\n                duration: Math.trunc(metadata.duration),\n                method: 'track.updateNowPlaying'\n            });\n        } else {\n            return Promise.resolve({});\n        }\n    }\n\n    scrobble(metadata) {\n        if(metadata.title && metadata.artist && !this._disableScrobblings) {\n            return this._makeRequest('post', {\n                track: metadata.title,\n                artist: metadata.artist,\n                duration: Math.trunc(metadata.duration),\n                timestamp: Math.trunc((+metadata.timestamp) / 1000),\n                method: 'track.scrobble'\n            });\n        } else {\n            return Promise.resolve({});\n        }\n    }\n\n    _makeRequest(method, params, requiresSignature = true) {\n        let mParams = new Map(params instanceof Map ? params : Object.entries(params));\n        mParams.set('api_key', LASTFM_API_KEY);\n        if(this._userToken) {\n            mParams.set('sk', this._userToken);\n        }\n        mParams.set('api_sig', this._signature(mParams));\n        mParams.set('format', 'json');\n\n        const query = mParams.map((value, key) => `${key}=${encodeURIComponent(value)}`).join('&');\n        method = method.toLowerCase();\n        if(method === 'get') {\n            return fetch(`${Lastfm.baseUrl}?${query}`).then(response => response.json());\n        } else if(method === 'post') {\n            const headers = new Headers();\n            headers.append('Content-Type', 'application/x-www-form-urlencoded; charset=utf-8');\n            return fetch(Lastfm.baseUrl, { method: 'POST', body: query, headers })\n                .then(response => response.json());\n        } else {\n            throw new Error('Unsupported method: ' + method);\n        }\n    }\n\n    _signature(params) {\n        const sig = params\n            .sort((a, b) => a.key.localeCompare(b.key))\n            .map((value, key) => key + value)\n            .reduce((prev, value) => prev + value, '')\n            + LASTFM_SECRET;\n        return md5(sig);\n    }\n}","import React, { Component } from 'react';\nimport $ from 'jquery';\nimport { ToastContainer, toast } from 'react-toastify';\nimport { Spring } from 'react-spring';\nimport bowser from 'bowser';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'material-design-icons/iconfont/material-icons.css';\nimport './styles/App/App.css';\nimport github from './github.svg';\nimport PlayQueue from './PlayQueue';\nimport PlayQueueList from './PlayQueueList';\nimport SearchPanel from './SearchPanel';\nimport { Lastfm, parseTitle } from './LastFM';\nimport { selectBestOption, loadAudioURL, addYoutubePlaylist } from './api';\nimport 'react-toastify/dist/ReactToastify.min.css';\n// import AdBlockDetect from 'react-ad-block-detect';\n\n//TODO Averigüar como arreglarlo ahora, parece que hay que usar CSS\n/*style({\n    TOP_RIGHT: {\n        top: '80px',\n        right: '1em'\n    }\n});*/\n\nclass App extends Component {\n    constructor (props) {\n        super(props);\n        this.state = ({\n            youtubeVideoURL: \"\",\n            qualityFromAudio: 0,\n            invalidURL: false,\n            youtubeAudioURL: \"\",\n            youtubeVideoTitle: \"\",\n            loading: false,\n            nightMode: true,\n            currentFormat: \"\",\n            youtubeVideoID: \"\",\n            showingQueue: false,\n            showingSearch: false,\n            youtubePlaylistID: \"\",\n            playQueue: new PlayQueue(),\n            isPlaying: false,\n            scrobblingState: 'none', // 'none', 'nowPlaying', 'scrobbled'\n        });\n        this.audioRef = React.createRef();\n        this.lastfm = new Lastfm(); window.xD = v => this.lastfm.disableScrobblings = !!v;\n        this.onPlaylistItemReorder = this.onPlaylistItemReorder.bind(this);\n        this.onPlaylistItemRemove = this.onPlaylistItemRemove.bind(this);\n        this.listenerTestButton = this.listenerTestButton.bind(this);\n        this.nightModeListener = this.nightModeListener.bind(this);\n        this.enqueueFromSeach = this.enqueueFromSeach.bind(this);\n        this.onWindowKeyUp = this.onWindowKeyUp.bind(this);\n        this.titleProgress = this.titleProgress.bind(this);\n        this.playFromSeach = this.playFromSeach.bind(this);\n        this.listenerForm = this.listenerForm.bind(this);\n        this.onSongError = this.onSongError.bind(this);\n        this.addToQueue = this.addToQueue.bind(this);\n        this.formatTime = this.formatTime.bind(this);\n        this.showQueue = this.showQueue.bind(this);\n        this.showSearch = this.showSearch.bind(this);\n        this.onSongEnd = this.onSongEnd.bind(this);\n        this.playSong = this.playSong.bind(this);\n        this.nextSong = this.nextSong.bind(this);\n        this.onPause = this.onPause.bind(this);\n        this.onPlay = this.onPlay.bind(this);\n        this.clear = this.clear.bind(this);\n    }\n\n    _testYoutubeVideoURL = \"https://www.youtube.com/watch?v=bM7SZ5SBzyY\";\n\n    clear(){\n        this.setState({playQueue: this.state.playQueue.emptyQueue()});\n    }\n\n    async addToQueue() {\n        if(this.state.youtubeVideoID) {\n            this.setState({ loading: true });\n            try {\n                const { title } = await loadAudioURL(this.state.youtubeVideoID);\n                this.setState({\n                    loading: false,\n                    playQueue: this.state.playQueue.add({\n                        id: this.state.youtubeVideoID,\n                        title\n                    })\n                }, () => {\n                    if (this.state.playQueue.values.length && !this.state.youtubeAudioURL){\n                        this.loadSong(this.state.playQueue.values[0].id);\n                        this.loadingToast.dismiss();\n                    } else {\n                        this.loadingToast.success('Enqueued', `\"${title}\" was added to the queue`)\n                    }\n                });\n            } catch(e) {\n                this.setState({ loading: false });\n                this.loadingToast.error(e.message, e.descriptiveMessage);\n            }\n        } else if(this.state.youtubePlaylistID) {\n            this.loadPlaylist();\n        }\n    }\n\n    playSong(){\n        this.setState({\n            playQueue: !this.state.youtubeVideoID ? this.state.playQueue : this.state.playQueue.addFirst({\n                id: this.state.youtubeVideoID,\n                title: null\n            })\n        });\n        if (this.state.youtubeVideoID) {\n            this.loadSong(this.state.youtubeVideoID, true);\n        } else if(this.state.youtubePlaylistID) {\n            this.loadPlaylist(true);\n        } else if(this.state.playQueue.values.length > 0 && !this.state.youtubeVideoURL) {\n            this.loadSong(this.state.playQueue.values[0].id);\n        }\n    }\n\n    enqueueFromSeach(item) {\n        if(item.id.kind === 'youtube#video') {\n            this.setState({ youtubeVideoID: item.id.videoId }, () => this.addToQueue());\n        } else if(item.id.kind === 'youtube#playlist') {\n            this.setState({ youtubePlaylistID: item.id.playlistId }, () => this.addToQueue());\n        }\n    }\n\n    playFromSeach(item) {\n        if(item.id.kind === 'youtube#video') {\n            this.setState({ youtubeVideoID: item.id.videoId }, () => this.playSong());\n        } else if(item.id.kind === 'youtube#playlist') {\n            this.setState({ youtubePlaylistID: item.id.playlistId }, () => this.playSong());\n        }\n    }\n\n    /**\n     * Loads the video and prepares the audio player. Modifies this state: loading, currentFormat, qualityFromAudio,\n     * youtubeAudioURL, youtubeVideoTitle, scrobblingState. Shows a loading spinner and updates the notification\n     * with the good result or the error.\n     * @param {string} youtubeVideoID Given a Youtube Video URL, loads the best quality for the current browser and\n     * prepares the player\n     * @param {boolean} autoplay When the player is ready, if it is true, then will start playing automatically\n     */\n    async loadSong(youtubeVideoID, autoplay = false) {\n        this.setState({ loading: true });\n        try {\n            const { codec, bitrate, bps, id } = await selectBestOption(youtubeVideoID);\n            this.setState({\n                currentFormat: `${codec}@~${bitrate ? bitrate : bps}kbps`,\n                qualityFromAudio: id\n            });\n\n            const { url, title } = await loadAudioURL(youtubeVideoID, id);\n            this.setState({\n                youtubeAudioURL: url,\n                youtubeVideoTitle: title,\n                loading: false,\n                scrobblingState: 'none'\n            }, () => {\n                $(\"title\").text(`${this.state.youtubeVideoTitle} - YouTube Audio`);\n                if(autoplay) {\n                    this.audioRef.current.oncanplay = async () => {\n                        try {\n                            await this.audioRef.current.play();\n                            this.loadingToast.dismiss();\n                        } catch(e) {\n                            toast.update(this.loadingToast._toast, {\n                                type: toast.TYPE.INFO,\n                                render: <NotifContent title='Press play manually' light={false}\n                                              text={'Due to your browser configuration, we cannot press play for you.' +\n                                                    ' You can change your autoplay options in the browser\\'s configuration.'} />,\n                                closeButton: null,\n                                closeOnClick: true,\n                            });\n                        }\n                        this.audioRef.current.oncanplay = null;\n                        this.loadingToast = null;\n                    };\n                } else {\n                    this.loadingToast.dismiss();\n                    this.loadingToast = null;\n                }\n            });\n        } catch(e) {\n            this.setState({ loading: false, youtubeAudioURL: \"\", youtubeVideoTitle: \"\" });\n            this.loadingToast.error(e.message, e.descriptiveMessage);\n            this.loadingToast = null;\n        }\n    }\n\n    /**\n     * Loads the playlist stored in `this.state.youtubePlaylistID` into the queue, showing a loading spinner,\n     * and, if there's nothing playing, it will start playing the first song of the play queue.\n     * @param {boolean} startPlaying When the playlist is loaded, should the player start playing?\n     */\n    async loadPlaylist(startPlaying) {\n        this.setState({ loading: true });\n        try {\n            const items = await addYoutubePlaylist(this.state.youtubePlaylistID, true);\n            let newState = {\n                loading: false,\n                playQueue: this.state.playQueue.add(...items),\n            };\n            if(!this.state.youtubeAudioURL && newState.playQueue.values.length > 0) {\n                newState.youtubeVideoID = newState.playQueue.values[0].id;\n                newState.youtubeVideoTitle = newState.playQueue.values[0].title;\n                this.loadSong(newState.playQueue.values[0].id, startPlaying);\n            }\n            this.setState(newState);\n        } catch(e) {\n            this.setState({ loading: false });\n            this.loadingToast.error(e.message, e.descriptiveMessage);\n            this.loadingToast = null;\n        }\n    }\n\n    listenerTestButton(event) {\n        event.preventDefault();\n        this.setState({ youtubeVideoURL: this._testYoutubeVideoURL });\n        this.loadSong(this.getYoutubeVideoID(this._testYoutubeVideoURL), true);\n    }\n\n    listenerForm(event) {\n        let url = event.target.value.trim();\n        let newState = {youtubeVideoURL: url};\n        let youtubeVideoID = this.getYoutubeVideoID(url);\n        let youtubePlaylistID = this.getPlaylistID(url);\n        if (youtubeVideoID !== null){\n            newState.invalidURL = false;\n            newState.youtubeVideoID = youtubeVideoID;\n        } else if(youtubePlaylistID !== null) {\n            newState.invalidURL = false;\n            newState.youtubePlaylistID = youtubePlaylistID;\n        } else {\n            newState.invalidURL = url.length !== 0;\n        }\n        this.setState(newState);\n        if(!this.state.youtubeAudioURL) {\n            //If it is not playing anything, then we can safely change that\n            $(\"title\").text(\"YouTube Audio\");\n        }\n    }\n\n    /**\n     * Tests whether the URL is a YouTube video and extract the video ID from it.\n     * @param {string} url URL to test\n     * @returns String|null the YouTube video ID if the URL is valid, or null otherwise\n     */\n    getYoutubeVideoID(url){\n        let youtubeVideoID =\n            /(?:(?:https?:\\/\\/)?(?:www\\.)?youtube\\.com\\/watch\\/?\\?(.+))|(?:(?:https?:\\/\\/)?(?:www\\.)?youtu\\.be\\/(.+))/\n                .exec(url);\n        if (youtubeVideoID !== null) {\n            if(youtubeVideoID[2]) {\n                return youtubeVideoID[2];\n            } else if(youtubeVideoID[1]) {\n                let query = App.parseQuery(youtubeVideoID[1]);\n                return query.v;\n            }\n        } else\n            this.setState({loading: false});\n        return null;\n    }\n\n    /**\n     * Tests whether the URL is a YouTube playlist and extract the playlist ID from it.\n     * @param {string} url URL to test\n     * @returns Object|null the YouTube playlist ID if the URL is valid, or null otherwise\n     */\n    getPlaylistID(url) {\n        let youtubePlaylistID = /playlist\\?(.+)/g.exec(url);\n        if(youtubePlaylistID !== null) {\n            return App.parseQuery(youtubePlaylistID[1]).list;\n        }\n        return null;\n    }\n\n    /**\n     * Converts the the query of an URL into a JS object\n     * @param {string} str The query of an URL (the part that starts with ?) but without the initial ?\n     * @returns Object A JS Object that represents the query\n     */\n    static parseQuery(str) {\n        return str\n            .split('&')\n            .map(e => e.split('='))\n            .reduce((obj, last) => ({ ...obj, [last[0]]: last[1] }), {});\n    }\n\n    nightModeListener(event){\n        event.preventDefault();\n        this.setState({ nightMode: !this.state.nightMode });\n    }\n\n    /**\n     * Converts a time in seconds to `{hour:}minutes:seconds` format.\n     * @param {number} currentTime Time in seconds\n     * @returns string The time formated\n     */\n    formatTime(currentTime) {\n        const seconds = Math.round(currentTime) % 60;\n        let minutes = Math.floor(Math.round(currentTime) / 60);\n        if(!this.audioRef.current || this.audioRef.current.duration < 3600) {\n            return `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;\n        } else {\n            const hours = Math.floor(minutes / 60);\n            minutes %= 60;\n            return `${hours}:${minutes < 10 ? '0' : ''}${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;\n        }\n    }\n\n    titleProgress(){\n        const currentTime = this.audioRef.current.currentTime;\n        let duration = this.audioRef.current.duration;\n        let time = this.formatTime(currentTime);\n        $(\"title\").text(`${this.state.isPlaying ? \"▶\" : \"▮▮\"} ${time} - ${this.state.youtubeVideoTitle} - YouTube Audio`);\n\n        if(bowser.safari) {\n            //Workaround for Safari m4a playing bug\n            duration /= 2;\n        }\n\n        if(this.lastfm.hasLoggedIn) {\n            //We must end the nowPlaying, if the title is available\n            if(this.state.scrobblingState === 'none') {\n                const parsed = parseTitle(this.state.youtubeVideoTitle);\n                if(parsed) {\n                    this.setState({ scrobblingState: null });\n                    this.lastfm.updateNowPlaying({\n                        ...parsed,\n                        duration,\n                        timestamp: new Date()\n                    }).then(() => this.setState({ scrobblingState: 'nowPlaying' }));\n                } else {\n                    this.setState({ scrobblingState: 'nowPlaying' });\n                }\n            } else if(this.state.scrobblingState === 'nowPlaying' && currentTime >= Math.min(duration / 2, 240)) {\n                //At the half of the song or when it reaches 4min, the scrobble must be sent, but only if\n                //we can get the song's title\n                const parsed = parseTitle(this.state.youtubeVideoTitle);\n                if(parsed) {\n                    this.setState({ scrobblingState: null });\n                    this.lastfm.scrobble({\n                        ...parsed,\n                        duration,\n                        timestamp: new Date()\n                    }).then(() => this.setState({ scrobblingState: 'scrobbled' }));\n                } else {\n                    this.setState({ scrobblingState: 'scrobbled' });\n                }\n            }\n        }\n\n        if(currentTime > duration && currentTime - duration > 1) {\n            //Workaround for Safari m4a playing bug\n            this.audioRef.current.pause();\n            this.onSongEnd(null);\n        }\n    }\n\n    onPlay(){ this.setState({isPlaying: true}); }\n\n    onPause(){ this.setState({isPlaying: false}); }\n\n    onSongEnd() {\n        this.setState({ playQueue: this.state.playQueue.deleteFirst(), scrobblingState: 'none' }, () => {\n            if (this.state.playQueue.values.length > 0) {\n                this.loadSong(this.state.playQueue.values[0].id, true);\n            }\n        });\n    }\n\n    onSongError(event) {\n        switch(event.target.error.code) {\n        case event.target.error.MEDIA_ERR_NETWORK:\n            toast.error(<NotifContent title='There was a network error'\n                                      text='Could not load the song. Check your internet connection.' />,\n                        { autoClose: false }\n            );\n            break;\n\n        case event.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED: {\n            const { youtubeVideoID, qualityFromAudio } = this.state;\n            this.setState({\n                youtubeAudioURL: `https://ytdl-audio-api.melchor9000.me/api/${youtubeVideoID}/${qualityFromAudio}/passthrough`\n            });\n            break;\n        }\n\n        default: return;\n        }\n    }\n\n    showQueue(event) {\n        event.preventDefault();\n        this.setState({\n            showingQueue: !this.state.showingQueue,\n            showingSearch: !this.state.showingQueue ? false : this.state.showingSearch\n        });\n    }\n\n    showSearch(event) {\n        event.preventDefault();\n        this.setState({\n            showingSearch: !this.state.showingSearch,\n            showingQueue: !this.state.showingSearch ? false : this.state.showingQueue\n        });\n    }\n\n    nextSong(event) {\n        event.preventDefault();\n        this.onSongEnd();\n    }\n\n    onPlaylistItemReorder(startIndex, endIndex) {\n        const playQueue = this.state.playQueue.reorder(startIndex, endIndex);\n        this.setState({\n            playQueue\n        });\n    }\n\n    onPlaylistItemRemove(element) {\n        const playQueue = this.state.playQueue.delete(element);\n        this.setState({\n            playQueue\n        });\n    }\n\n    onWindowKeyUp(event) {\n        if(event.code === 'Space' && event.target.getAttribute('id') !== \"videoURL\") {\n            if(this.audioRef.current) {\n                event.preventDefault();\n                event.stopPropagation();\n                if(this.audioRef.current.paused) {\n                    this.audioRef.current.play().catch();\n                } else {\n                    this.audioRef.current.pause();\n                }\n            }\n        }\n    }\n\n    componentDidMount() {\n        window.addEventListener('keyup', this.onWindowKeyUp);\n        window.addEventListener('resize', () => this.forceUpdate());\n\n        //TODO Force redirect people from old place to the new one :)\n        if(window.location.hostname === 'majorcadevs.github.io') {\n            toast.info(<p>We've change the location to\n                <a href=\"https://youtubeAudio.majorcadevs.com\">https://youtubeAudio.majorcadevs.com</a>.\n                <small>We'll redirect you to the new location when this notification is closed :)</small>\n            </p>, { onClose: () => window.location.assign('https://youtubeAudio.majorcadevs.com'), autoClose: 10000 })\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if(!prevState.loading && this.state.loading) {\n            this.loadingToast = new LoadingToastController();\n        }\n\n        if(prevState.isPlaying !== this.state.isPlaying){\n            $(\"title\").text(\n                `${this.state.isPlaying ? \"▶\" : \"▮▮\"}\n                ${this.formatTime(this.audioRef.current.currentTime)} - ${this.state.youtubeVideoTitle} - YouTube Audio`\n            );\n        }\n\n        if(!prevState.nightMode && this.state.nightMode) {\n            $('body').addClass('AppDark').removeClass('AppLight');\n        } else if(prevState.nightMode && !this.state.nightMode) {\n            $('body').removeClass('AppDark').addClass('AppLight');\n        }\n    }\n\n    render() {\n        const { youtubeVideoURL, invalidURL, youtubeVideoTitle, youtubeAudioURL, loading, nightMode,\n            showingQueue, currentFormat, playQueue, showingSearch } = this.state;\n        return (\n            <div id=\"AppContainer\">\n                <Header nightMode={ nightMode } nightModeListener={ this.nightModeListener } lastfm={ this.lastfm } />\n                <div className=\"container-fluid\">\n                    <ToastContainer pauseOnHover={ false } />\n                    <p className=\"greyText\" id=\"greyText\">\n                        Enjoy the audio from the youtube videos!\n                    </p>\n                    <div className=\"d-flex row justify-content-center align-items-center\" id=\"audioQuery\">\n                        <div className=\"col-md-6 col-sm-12\">\n                        {/*\n                        ----\n                        Disabled until bug confirm\n                        ----\n                        <AdBlockDetect>\n                        <div className=\"alert alert-danger\" role=\"alert\">\n                          Please, consider disabling Ad-Block in order to make the website work properly\n                        </div>\n                        </AdBlockDetect>\n                        */}\n                            <div className=\"input-group\" id=\"input\">\n                                <div className=\"input-group-prepend\">\n                                    <Button nightMode={ nightMode }\n                                           id=\"test\" name=\"test\" value=\"TEST\" onClick={ this.listenerTestButton }\n                                           disabled={loading}/>\n                                </div>\n                                <input type=\"text\" className={`form-control ${invalidURL ? 'is-invalid' : ''}`}\n                                       id=\"videoURL\" name=\"videoURL\" onChange={ this.listenerForm }\n                                       value={ youtubeVideoURL } placeholder=\"insert here your youtube video url...\"\n                                       disabled={loading}/>\n                            </div>\n                            <div className=\"row justify-content-center\">\n                                <div className=\"btn-group mt-3\">\n                                    <Button nightMode={ nightMode }\n                                            name=\"Play Song\" value=\"Play Now!\" onClick={ this.playSong }\n                                            disabled={(loading || invalidURL || youtubeVideoURL.length === 0) && playQueue.values.length < 1}/>\n                                    <Button nightMode={ nightMode }\n                                            name=\"Add to Queue\" value=\"Enqueue\" onClick={ this.addToQueue }\n                                            disabled={loading || invalidURL || youtubeVideoURL.length === 0}/>\n                                    <Button nightMode={ nightMode }\n                                            name=\"Clear queueue\" value=\"Clear Queue\" onClick={ this.clear }\n                                            disabled={loading || playQueue.values.length < 2}/>\n                                    <Button nightMode={ nightMode }\n                                            name=\"Next song\" value=\"Next Song\" onClick={ this.nextSong }\n                                            disabled={loading || playQueue.values.length < 2}/>\n                                </div>\n                            </div>\n                            <NowPlayingText title={youtubeVideoTitle} currentFormat={currentFormat} />\n                            { this.state.youtubeAudioURL ?\n                                <audio id=\"player\" className=\"player\" controls src={ youtubeAudioURL } onError={ this.onSongError }\n                                       onTimeUpdate={ this.titleProgress } ref={this.audioRef} onEnded={ this.onSongEnd }\n                                       onPlay={this.onPlay} onPause={this.onPause} /> : null\n                            }\n                        </div>\n                    </div>\n                    <PlayQueueList showing={ showingQueue }\n                                   playQueue={ this.state.playQueue }\n                                   onPlaylistItemReorder={ this.onPlaylistItemReorder }\n                                   onPlaylistItemRemove={ this.onPlaylistItemRemove } />\n                    <SearchPanel showing={ showingSearch } onPlayClicked={ this.playFromSeach } onEnqueueClicked={ this.enqueueFromSeach } />\n                    <PlayQueueListButton onClick={ this.showQueue } showingQueue={ showingQueue } nightMode={ nightMode } left={ showingQueue || showingSearch } />\n                    <SearchButton onClick={ this.showSearch } showingSearch={ showingSearch } nightMode={ nightMode } left={ showingQueue || showingSearch } />\n                </div>\n\n                <Footer />\n            </div>\n        );\n    }\n}\n\n//Decorador que permite que un componente se muestre o no cuando\n//una propiedad (`prop') existe.\nconst ShowIf = (name, func) => {\n    return props => {\n        if(props[name]) {\n            return func(props);\n        } else {\n            return null;\n        }\n    }\n};\n\nconst Button = props => {\n    let lprops = {...props};\n    delete lprops.nightMode;\n    return <input type=\"button\" className={`btn btn-outline-${ props.nightMode ? 'light' : 'dark' }`} {...lprops} />;\n};\n\nconst LoadingSpinner = () => (\n    <div className=\"row justify-content-center\">\n        <div className=\"title loading\" id=\"stateText\">\n            Loading...\n        </div>\n        <div className=\"loader\"/>\n    </div>\n);\n\nconst NowPlayingText = ShowIf('title', ({ title, currentFormat }) => (\n    <div className=\"title\" id=\"stateText\">\n        <div id=\"NowPlaying\">\n            Now Playing: ({ currentFormat })\n        </div>\n        <div id=\"title\" className=\"text-center\"> { title } </div>\n    </div>\n));\n\nconst Header = ({ nightMode, nightModeListener, lastfm }) => (\n    <header className=\"AppHeader\" id=\"AppHeader\">\n        <h1 className=\"App-title\">YouTube Audio Player</h1>\n        <button className=\"btn btn-sm btn-outline-light float-right onoffmode\" id=\"changeSkinButton\" onClick={ nightModeListener }>\n            { !nightMode ? <i className=\"material-icons\">brightness_2</i> : <i className=\"material-icons\">wb_sunny</i>}\n        </button>\n        <button className=\"btn btn-sm btn-outline-light float-right lastfm\" onClick={ () => !lastfm.hasLoggedIn ? lastfm.startAuthentication() : lastfm.deauthenticate() }>\n            <img src=\"https://www.last.fm/static/images/footer_logo@2x.49ca51948b0a.png\" width={ 24 } alt={ lastfm.username } />\n            { lastfm.hasLoggedIn && <i className=\"material-icons\"\n                                       style={{ position: 'absolute', top: 0, left: 0, fontSize: 34, marginLeft: 1, color: 'rgb(255, 180, 180)' }}>close</i>}\n        </button>\n    </header>\n);\n\nconst Footer = () => (\n    <footer className=\"AppFooter footer align-items-center\" id=\"AppFooter\">\n        <div id=\"FooterContent\">\n            <a href=\"https://github.com/MajorcaDevs/youtubeAudio\" target=\"_blank\" rel=\"noopener noreferrer\">\n                <img alt=\"GitHub\" src={github} id=\"githubLogo\" className=\"mr-1\" />\n                &nbsp;Made by <b>MajorcaDevs</b> with <b>{\"<3\"}</b>\n            </a>\n        </div>\n    </footer>\n);\n\nconst NotifContent = ({ title, text, light }) => (\n    <div>\n        <p className=\"lead\">{ title }</p>\n        <p className={light ? \"text-light\" : \"text-muted\"}><small>{ text }</small></p>\n    </div>\n);\n\nconst PlayQueueListButton = ({ showingQueue, nightMode, onClick, left }) => (\n    <Spring from={{ right: 15 }}\n            to={{ right: left ? Math.min(-PlayQueueList._right + 15, document.body.clientWidth - 45) : 15 }}>\n        { styles =>\n            <button id=\"playQueue\"\n                    style={ styles }\n                    className={`btn ${showingQueue ? 'right' : 'left'} btn-outline-${ nightMode ? 'light' : 'dark' }`}\n                    onClick={ onClick }>\n                <div id=\"arrow\" className={`${showingQueue ? 'right' : 'left'}`}/>\n            </button>\n        }\n    </Spring>\n);\n\nconst SearchButton = ({ showingSearch, nightMode, onClick, left }) => (\n    <Spring from={{ right: 15 }}\n            to={{ right: left ? Math.min(-SearchPanel._right + 15, document.body.clientWidth - 45) : 15 }}>\n        { styles =>\n            <button id=\"searchPanelButton\"\n                    style={ styles }\n                    className={`btn ${showingSearch ? 'right' : 'left'} btn-outline-${ nightMode ? 'light' : 'dark' }`}\n                    onClick={ onClick }>\n                <i className=\"material-icons\">search</i>\n            </button>\n        }\n    </Spring>\n);\n\nclass LoadingToastController {\n    constructor() {\n        this._toast = toast(<LoadingSpinner />, { autoClose: false, closeOnClick: false, closeButton: false });\n    }\n\n    success(title, content) {\n        toast.update(this._toast, {\n            type: toast.TYPE.DEFAULT,\n            render: <NotifContent title={ title } light={false} text={ content } />,\n            autoClose: 4000,\n            closeButton: null,\n            closeOnClick: true,\n        });\n    }\n\n    error(title, content) {\n        toast.update(this._toast, {\n            render: <NotifContent title='Video not found' light={true}\n                                  text='Check that the video URL exists or is complete.' />,\n            type: toast.TYPE.ERROR,\n            closeButton: null,\n            closeOnClick: true,\n        });\n    }\n\n    dismiss() {\n        toast.dismiss(this._toast);\n    }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\nimport { toast } from 'react-toastify';\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n              toast.info('There\\'s and update of the app. Refresh the page to apply it.', { autoClose: false });\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n              toast.info('[FYI] The web is cached to speed up the page.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n      toast.error('You are not connected to internet. The web won\\'t work without internet.', { autoClose: false });\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\nregisterServiceWorker();\n","module.exports = __webpack_public_path__ + \"static/media/github.960ee6c3.svg\";"],"sourceRoot":""}